import{u as A}from"./useInjected-DxKzBzVa.js";import{d as v,c as t,t as i,n as o,b as e,_ as f,r as m,h as U,F as k,i as l,a as C,j as _,k as M,e as P,w as B,u as N,R as w,f as W,l as j,m as K,p as L,q as R,s as V}from"./index-CmdTotCa.js";const q=["disabled"],Q=v({__name:"Button",props:{disabled:{type:Boolean,default:!1},text:{default:""},type:{default:"primary"}},setup(p){return(s,a)=>(e(),t("button",{class:o([s.$style.button,{[s.$style.disabled]:s.disabled,[s.$style.primary]:s.type==="primary",[s.$style.secondary]:s.type==="secondary"}]),disabled:s.disabled},i(s.text),11,q))}}),E="iKOJo",F="yhVMp",G="G2W-j",O="amKB0",S={button:E,disabled:F,primary:G,secondary:O},z={$style:S},D=f(Q,[["__cssModules",z]]),H=l("h2",null,"Photos",-1),J={key:0,"data-test":"loading-photos"},T={key:1,"data-test":"no-photos"},Y=v({__name:"UserDetailAlbumPhotos",props:{albumId:{default:null},availableAlbumIds:{default:()=>[]}},emits:["close"],setup(p,{emit:s}){const a=p,u=s,$=A(M),r=m(!0),d=m([]),h=m(1),b=async()=>{a.albumId!==null&&a.availableAlbumIds.includes(a.albumId)&&(r.value=!0,d.value=await $(a.albumId,h.value),r.value=!1)},y=m(!1),g=async()=>{a.albumId!==null&&!y.value&&(y.value=!0,h.value+=1,d.value=d.value.concat(await $(a.albumId,h.value)),y.value=!1)};return U(()=>a.albumId,()=>b(),{immediate:!0}),(c,I)=>(e(),t("div",{class:o(c.$style.root)},[H,r.value?(e(),t("div",J," Loading photos... ")):(e(),t(k,{key:1},[d.value.length?(e(),t("div",{key:0,class:o(c.$style.photosWrapper)},[l("div",{class:o(["scrollbar",c.$style.photos])},[(e(!0),t(k,null,C(d.value,n=>(e(),t("div",{key:n.id,class:o(c.$style.photo),"data-test":"photo"},i(n.id),3))),128))],2),l("div",{class:o(c.$style.buttons)},[_(D,{"data-test":"load-more",disabled:y.value,text:"Load more",onClick:g},null,8,["disabled"]),_(D,{"data-test":"close",text:"Close",type:"secondary",onClick:I[0]||(I[0]=n=>u("close"))})],2)],2)):(e(),t("div",T," No photos "))],64))],2))}}),X="_99rQQ",Z="fkYOW",x="_001sB",ss="SqdB7",es="qs3Al",ts={root:X,photosWrapper:Z,photos:x,photo:ss,buttons:es},as={$style:ts},os=f(Y,[["__cssModules",as]]),ls=l("h2",null,"Albums",-1),ns={key:1,"data-test":"no-albums"},us=v({__name:"UserDetailAlbums",props:{albums:{}},setup(p){return(s,a)=>(e(),t("div",{class:o(s.$style.root)},[ls,s.albums.length?(e(),t("div",{key:0,class:o(s.$style.albums)},[(e(!0),t(k,null,C(s.albums,u=>(e(),P(N(w),{key:u.id,class:o(s.$style.album),"data-test":"album",to:{name:"UserDetailAlbum",params:{albumId:u.id}}},{default:B(()=>[W(i(u.title),1)]),_:2},1032,["class","to"]))),128))],2)):(e(),t("div",ns," No albums "))],2))}}),rs="Ab-QC",ds="pGg-c",cs="_8HRfe",is={root:rs,albums:ds,album:cs},ms={$style:is},ps=f(us,[["__cssModules",ms]]),bs=l("h2",null,"Info",-1),ys=l("span",null,"ID:",-1),hs={"data-test":"id"},_s=l("span",null,"Name:",-1),vs={"data-test":"name"},fs=l("span",null,"E-mail:",-1),$s={"data-test":"email"},Is=l("span",null,"Phone:",-1),ks={"data-test":"phone"},gs=v({__name:"UserDetailInfo",props:{user:{}},setup(p){return(s,a)=>(e(),t("div",{class:o(s.$style.root)},[bs,l("div",{class:o(s.$style.info)},[ys,l("span",hs,i(s.user.id),1),_s,l("span",vs,i(s.user.name),1),fs,l("span",$s,i(s.user.email),1),Is,l("span",ks,i(s.user.phone),1)],2)],2))}}),As="W2bIq",Ds="C7ax1",Us={root:As,info:Ds},Cs={$style:Us},Ms=f(gs,[["__cssModules",Cs]]),Ps={key:0,"data-test":"loading-user-info"},Bs={key:1,"data-test":"no-user-info"},Ns=v({__name:"UserDetail",props:{albumId:{default:null},userId:{default:null}},setup(p){const s=L(),a=p,u=m(!0),$=A(R),r=m(null),d=async()=>{a.userId!==null&&(r.value=await $(a.userId))},h=A(V),b=m([]),y=async()=>{a.userId!==null&&(b.value=await h(a.userId))},g=j(()=>b.value.map(n=>n.id)),c=()=>{s.push({name:"UserDetail",params:{userId:a.userId}})},I=async()=>{a.userId!==null&&(u.value=!0,await Promise.all([d(),y()]),u.value=!1)};return U(()=>a.userId,()=>I(),{immediate:!0}),(n,Rs)=>(e(),t("div",{class:o(n.$style.user)},[u.value?(e(),t("div",Ps," Loading info... ")):(e(),t(k,{key:1},[r.value?(e(),t("div",{key:0,class:o(n.$style.content)},[l("div",{class:o(n.$style.contentPart)},[_(Ms,{user:r.value},null,8,["user"]),_(ps,{albums:b.value},null,8,["albums"])],2),n.albumId&&b.value.length?(e(),t("div",{key:0,class:o(n.$style.contentPart)},[_(os,{"album-id":n.albumId,"available-album-ids":g.value,onClose:c},null,8,["album-id","available-album-ids"])],2)):K("",!0)],2)):(e(),t("div",Bs," No info "))],64))],2))}}),ws="_4kfCR",Ws="NCWNw",js="Dtgyl",Ks={user:ws,content:Ws,contentPart:js},Ls={$style:Ks},Qs=f(Ns,[["__cssModules",Ls]]);export{Qs as default};
