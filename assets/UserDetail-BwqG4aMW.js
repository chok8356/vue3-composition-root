import{d as h,c as o,a,n,t as p,_ as $,r as y,h as A,i as l,F as I,e as D,j as f,f as P,w as U,g as C,u as M,R as B,k as N,l as w,b as W}from"./index-BeveE0SM.js";const L=["disabled"],R=h({__name:"Button",props:{disabled:{type:Boolean,default:!1},text:{default:""},type:{default:"primary"}},setup(b){return(s,e)=>(a(),o("button",{class:n([s.$style.button,{[s.$style.disabled]:s.disabled,[s.$style.primary]:s.type==="primary",[s.$style.secondary]:s.type==="secondary"}]),disabled:s.disabled},p(s.text),11,L))}}),V="iKOJo",q="yhVMp",Q="G2W-j",j="amKB0",E={button:V,disabled:q,primary:Q,secondary:j},F={$style:E},g=$(R,[["__cssModules",F]]),G={key:0,"data-test":"loading-photos"},K={key:1,"data-test":"no-photos"},O=h({__name:"UserDetailAlbumPhotos",props:{albumId:{},availableAlbumIds:{},deps:{}},emits:["close"],setup(b,{emit:s}){const e=b,r=s,c=y(!0),m=y([]),d=y(1);async function k(){e.albumId!==null&&e.availableAlbumIds.includes(e.albumId)&&(c.value=!0,await e.deps.getAlbumPhotos(e.albumId,d.value).then(u=>{u.match({err:async()=>{},ok:async t=>{m.value=t}})}),c.value=!1)}const v=y(!1);async function _(){e.albumId!==null&&!v.value&&(v.value=!0,d.value+=1,await e.deps.getAlbumPhotos(e.albumId,d.value).then(u=>{u.match({err:async()=>{},ok:async t=>{m.value=[...m.value,...t]}})}),v.value=!1)}return A(()=>e.albumId,()=>k(),{immediate:!0}),(u,t)=>(a(),o("div",{class:n(u.$style.root)},[t[1]||(t[1]=l("h2",null,"Photos",-1)),c.value?(a(),o("div",G," Loading photos... ")):(a(),o(I,{key:1},[m.value.length>0?(a(),o("div",{key:0,class:n(u.$style.photosWrapper)},[l("div",{class:n(["scrollbar",u.$style.photos])},[(a(!0),o(I,null,D(m.value,i=>(a(),o("div",{key:i.id,class:n(u.$style.photo),"data-test":"photo"},p(i.id),3))),128))],2),l("div",{class:n(u.$style.buttons)},[f(g,{"data-test":"load-more",disabled:v.value,text:"Load more",onClick:_},null,8,["disabled"]),f(g,{"data-test":"close",text:"Close",type:"secondary",onClick:t[0]||(t[0]=i=>r("close"))})],2)],2)):(a(),o("div",K," No photos "))],64))],2))}}),S="_99rQQ",z="fkYOW",H="_001sB",J="SqdB7",T="qs3Al",Y={root:S,photosWrapper:z,photos:H,photo:J,buttons:T},X={$style:Y},Z=$(O,[["__cssModules",X]]),x={key:1,"data-test":"no-albums"},ss=h({__name:"UserDetailAlbums",props:{albums:{}},setup(b){return(s,e)=>(a(),o("div",{class:n(s.$style.root)},[e[0]||(e[0]=l("h2",null,"Albums",-1)),s.albums.length>0?(a(),o("div",{key:0,class:n(s.$style.albums)},[(a(!0),o(I,null,D(s.albums,r=>(a(),P(M(B),{key:r.id,class:n(s.$style.album),"data-test":"album",to:{name:"UserDetailAlbum",params:{albumId:r.id}}},{default:U(()=>[C(p(r.title),1)]),_:2},1032,["class","to"]))),128))],2)):(a(),o("div",x," No albums "))],2))}}),es="Ab-QC",ts="pGg-c",as="_8HRfe",os={root:es,albums:ts,album:as},ls={$style:os},ns=$(ss,[["__cssModules",ls]]),us={"data-test":"id"},rs={"data-test":"name"},ds={"data-test":"email"},is={"data-test":"phone"},cs=h({__name:"UserDetailInfo",props:{user:{}},setup(b){return(s,e)=>(a(),o("div",{class:n(s.$style.root)},[e[4]||(e[4]=l("h2",null,"Info",-1)),l("div",{class:n(s.$style.info)},[e[0]||(e[0]=l("span",null,"ID:",-1)),l("span",us,p(s.user.id),1),e[1]||(e[1]=l("span",null,"Name:",-1)),l("span",rs,p(s.user.name),1),e[2]||(e[2]=l("span",null,"E-mail:",-1)),l("span",ds,p(s.user.email),1),e[3]||(e[3]=l("span",null,"Phone:",-1)),l("span",is,p(s.user.phone),1)],2)],2))}}),ms="W2bIq",ps="C7ax1",ys={root:ms,info:ps},bs={$style:ys},vs=$(cs,[["__cssModules",bs]]),fs={key:0,"data-test":"loading-user-info"},hs={key:1,"data-test":"no-user-info"},$s=h({__name:"UserDetail",props:{albumId:{},deps:{},userId:{}},setup(b){const s=b,e=N(),r=y(!0),c=y();async function m(){s.userId!==void 0&&await s.deps.getUserDetailInfo(s.userId).then(t=>{t.match({err:async()=>{},ok:async i=>{c.value=i}})})}const d=y([]);async function k(){s.userId!==void 0&&await s.deps.getUserAlbums(s.userId).then(t=>{t.match({err:async()=>{},ok:async i=>{d.value=i}})})}const v=w(()=>d.value.map(t=>t.id));async function _(){s.userId!==null&&(r.value=!0,await Promise.all([m(),k()]),r.value=!1)}function u(){e.push({name:"UserDetail",params:{userId:s.userId}})}return A(()=>s.userId,()=>_(),{immediate:!0}),(t,i)=>(a(),o("div",{class:n(t.$style.user)},[r.value?(a(),o("div",fs," Loading info... ")):(a(),o(I,{key:1},[c.value?(a(),o("div",{key:0,class:n(t.$style.content)},[l("div",{class:n(t.$style.contentPart)},[f(vs,{user:c.value},null,8,["user"]),f(ns,{albums:d.value},null,8,["albums"])],2),t.albumId&&d.value.length>0?(a(),o("div",{key:0,class:n(t.$style.contentPart)},[f(Z,{"album-id":t.albumId,"available-album-ids":v.value,deps:t.deps.UserDetailAlbumPhotos,onClose:u},null,8,["album-id","available-album-ids","deps"])],2)):W("",!0)],2)):(a(),o("div",hs," No info "))],64))],2))}}),Is="_4kfCR",ks="NCWNw",_s="Dtgyl",gs={user:Is,content:ks,contentPart:_s},As={$style:gs},Ps=$($s,[["__cssModules",As]]);export{Ps as default};
